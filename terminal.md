# overview

Одним из первых способов управления компьютером через внешний обмен информацией были перфокарты, как заимствованная технология из другой области. Потом появились **терминалы** - самостоятельные отдельные устройства из клавиатуры и монитора для обмена текстом с компьютером. И первым таким терминалом был **телетайп**, который заимствован из телеграфии. Со временем терминалы превратились в видеотерминалы, печатные ленты заменили на ЭЛТ и добавили микропроцессор.

Терминал подключался через UART порт. У драйвера порта в операционной системе был буфер для манипуляций над передаваемым текстом (редактирование, отображение ввода, перенос строки), который мог отключаться, (например, для текстовых редакторов) и имел драйвер TTY для управления сеансом обмена текстом (определить программу, которая получит вводимые данные, а какая передаст принимаемые). В Unix драйвер порта управлялся через устройство TTY в виде файла в `/dev/`. При входе программа login передаёт права на файл конкретного терминала пользователю.

Сегодня физический терминал и UART порт заменил эмулятор терминала. Для общения с программой он создаёт виртуальный терминал - **псевдотерминал**. Функция `int posix_openpt(int flags)` создаётся файл в `/dev/pts/`, выполняющим роль slave, и возвращает файловый дескриптор, являющимся master. Эмулятор терминала соединяется с master, master - со slave через Unix socket, а slave - с программой. Таким образом между эмулятором терминала и программой двухсторонний текстовый обмен.

**Виртуальные терминалы**, оставшиеся из прошлого, также доступны по нажатию Alt + F1-F7.

Узнать терминал текущего процесса

    tty

Вывод настроек терминала

    stty -a

Отключить автоперевод длинных строк

    tput rmam
    man 5 terminfo
    man termcap
    man tput

Кол-во псевдотерминалов

    echo "$(cat /proc/sys/kernel/pty/nr)/$(cat /proc/sys/kernel/pty/max)"

Эмулятор терминала в ретро стиле

    apt install cool-retro-term

Вставка управляющих символов

    Ctrl + v
    Ctrl + g

Стереть слово

    Ctrl + w

## X-terminal

Помимо текстовых терминалов были ещё и Х-терминалы, соединявшиеся с X Window System по протоколу X11, но из-за появления в компьютерах видеокарт и периферийных устройств Х-терминалы стали не нужны, код X Window System перестал поддерживаться, все просто надстраивают костыли над ним. Поэтому появился Wayland, в котором убраны лишние слои абстракции от железа, окна напрямую отрисовываются в видеодрайвере, что повышает отзывчивость интерфейса.


