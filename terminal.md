# overview

После перфокарт для взаимодействия с компьютером стали использовать **терминал** - отдельное от компьютера самостоятельное устройство из клавиатуры и монитора для обмена текстом с компьютером. В качестве первого телминала был **телетайп**, широко применявшийся в то время в телеграфии. Со временем вместо печатный вывод заменили на ЭЛТ, терминалы превратились в видеотерминалы, добавили микропроцессор.

Терминал подключался через UART порт. В операционной системе был драйвер порта, который имел буфер для манипуляций над передаваемым текстом (редактирование, отображение ввода, перенос строки). Буфер мог отключаться, например, для текстовых редакторов, которые сами отвечали за изменение текста. Также буфер имел драйвер TTY для управления сеансом обмена текстом, чтобы определить программу, которая получит вводимые данные, а какая будет передавать данные на приём. В Unix драйвер порта управляется через файловое устройство TTY в папке `/dev/`. Для этого программа login при входе в систему передаёт пользователю права на файл конкретного терминала.

Сегодня вместо физического терминала и UART порта используется эмулятор терминала. Для общения с программой он создаёт виртуальный терминал - **псевдотерминал**. Функция `int posix_openpt(int flags)` создаёт файл в `/dev/pts/` (slave) и возвращает файловый дескриптор (master). Эмулятор терминала соединяется с master, master - со slave через Unix socket, а slave - с программой. Таким образом между эмулятором терминала и программой двухсторонний текстовый обмен.

**Виртуальные терминалы** из прошлого также остались доступны по нажатию Alt + F1-F7.

Вывести файл терминала, подключенного к STDIN

    tty

Вывод настроек терминала

    stty -a

Отключить автоперевод длинных строк

    tput rmam
    man 5 terminfo
    man termcap
    man tput

Кол-во псевдотерминалов

    echo "$(cat /proc/sys/kernel/pty/nr)/$(cat /proc/sys/kernel/pty/max)"

Эмулятор терминала в ретро стиле

    apt install cool-retro-term

Вставка управляющих символов

    Ctrl + v
    Ctrl + g

Стереть слово

    Ctrl + w

## X-terminal

Помимо текстовых терминалов были ещё и Х-терминалы, соединявшиеся с X Window System по протоколу X11, но из-за появления в компьютерах видеокарт и периферийных устройств Х-терминалы стали не нужны, код X Window System перестал поддерживаться, все просто надстраивают костыли над ним. Поэтому появился Wayland, в котором убраны лишние слои абстракции от железа, окна напрямую отрисовываются в видеодрайвере, что повышает отзывчивость интерфейса.


