Запуск контейнера

    docker run -it debian bash

Произойдёт следующее

1. Скачается последняя версия образа Debian, если его нет
2. Создастся новый изменяемый volume поверх постоянных volume в образе (файлы в верхних volume заменяют файлы из нижних)
3. Запустится bash в контейнере
4. `-t` - создать псевдотелетайп для процесса, `-i` - держать STDIN процесса открытым

Теперь наш ввод команд подключен к процессу в контейнере. Если завершить все процессы в контейнере, контейнер считается остановленным.

Данные, появившиеся в процессе работы контейнера хранятся на верхнем volume. По умолчанию он анонимный, то есть каждый раз будет создаваться заново и всё будет начинаться с чистого листа. В анонимных томах принято хранить артефакты работы процесса, которые относятся к конкретному запуску процесса (логи, кэш, временные файлы).

Просмотрим текущие volume

    docker volume ls

Для хранения постоянных данных используются именованные volume.

    docker run -it -v my_data:/data debian bash

Теперь всё, что было сохранено в процессе работы в папку `/data` будет в именованном volume `my_data` и его можно будет использовать снова. Анонимные volume тоже можно подключать повторно, например, для анализа прошлых запусков.

В метаданных некоторых образов могут быть заранее определены такие папки в разделе Volumes

    docker pull mariadb
    docker inspect mariadb

Для них будет создаваться отдельный анонимный volume, если не указать его, как именованный. Если в образе в этой папке есть какие-то данные, они скопируются в volume.

Наличие верхнего изменяемого volume отличает контейнер от образа. Любой контейнер можно превратить в образ, верхний volume станет постоянным, а запуск контейнера из образа будет создавать новый верхний volume

    docker commit 62040ab88b04 myimage1

Просмотрим образы

    docker image ls

Для создания более воспроизводимых, компактных и отлаживаемых образов используется система сборки через Dockerfile.
